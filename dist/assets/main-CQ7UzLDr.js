var _=Object.defineProperty;var L=(a,e,t)=>e in a?_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var u=(a,e,t)=>(L(a,typeof e!="symbol"?e+"":e,t),t);import"./modulepreload-polyfill-B5Qt9EMX.js";import{B as w,S as I,L as E}from"./firebase-VM5qsLFT.js";class b{constructor(){this.items=[]}set(e){e.forEach(t=>{this.items.push(t)})}getItems(){return this.items}}class B{constructor(){}}class v{constructor(){}}class f{constructor({onRenderInBag:e}){this.itemsListNode=document.getElementById("shopListItems"),this.onRenderInBag=e}getListNode(){return this.itemsListNode}renderListItems(e){e.forEach(t=>{this.createItem(t)})}createItem(e){const t=document.createElement("li");t.id=e.id,t.classList.add("shop__item"),t.classList.add("item-shop");const i=document.createElement("div");i.classList.add("item-shop__img-wrapper");const s=document.createElement("a");s.classList.add("item-shop__link"),s.href=`./pages/card.html?id=${e.id}`;const c=document.createElement("img");c.classList.add("item-shop__image"),c.src=e.imageURL,c.alt=`фото ${e.model}`;const r=document.createElement("div");r.classList.add("item-shop__discription-item");const o=document.createElement("a");o.classList.add("item-shop__link-title"),o.href=`./pages/card.html?id=${e.id}`;const l=document.createElement("h2");l.classList.add("item-shop__title"),l.innerText=e.model;const m=document.createElement("h3");m.classList.add("item-shop__small-description"),m.innerText=e.series;const h=document.createElement("div");h.classList.add("item-shop__action");const g=document.createElement("span");g.classList.add("item-shop__price"),g.innerText=`$ ${e.price}`;const p=document.createElement("div");p.classList.add("item-shop__btn-wrapper");const n=document.createElement("button");n.classList.add("item-shop__button"),n.onclick=()=>{this.onRenderInBag(e.id,n)};const d=document.createElement("img");d.classList.add("item-shop__img"),d.src="./images/icons/bag-img.svg",d.alt="картинка корзины",s.append(c),i.append(s),o.append(l),r.append(o,m),n.append(d),p.append(n),h.append(g,p),t.append(i,r,h),this.itemsListNode.append(t)}}class k{constructor(){this.itemsBagListNode=document.getElementById("bagList")}createBagItem(e){const t=document.createElement("li");t.classList.add("bag__item");const i=document.createElement("a");i.classList.add("bag__link"),i.href=`./pages/card.html?id=${e.id}`;const s=document.createElement("img");s.classList.add("bag__img"),s.src=e.imageURL,s.alt="картинка из корзины",i.append(s),t.append(i),this.itemsBagListNode.insertAdjacentElement("beforeend",t)}}class M{constructor(){}}class V{constructor(){u(this,"handleClickItemBtn",(e,t)=>{this.itemsModel.getItems().forEach(i=>{if(e!==i.id)return;const s=this.localStorage.get();console.log(s),!s.includes(e)&&(this.bagModel.set(i),s.push(e),this.localStorage.set(s),t.style.cssText="background-color: #47b647;",this.bagPreviewView.createBagItem(i))})});this.itemsModel=new b,this.bagModel=new w,this.ordersModel=new B,this.userModel=new v,this.itemsView=new f({onRenderInBag:this.handleClickItemBtn}),this.bagPreviewView=new k,this.ordersPreviewView=new M,this.storage=new I,this.localStorage=new E}init(){this.storage.pull().then(e=>{!e||!e.length||(this.itemsModel.set(e),this.itemsView.renderListItems(e),e.forEach(t=>{this.localStorage.get().forEach(s=>{t.id===s&&this.bagPreviewView.createBagItem(t)})}))})}}const S=new V;S.init();
